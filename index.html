<!doctype html>
<html lang="de">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>UZH Alumni Informatik – Netzwerk, Events, Sponsoren</title>
    <meta name="description" content="Alumni Informatik Universität Zürich: Netzwerk, Events, Sponsoren & Kontakt."/>
    <link rel="stylesheet" href="styles.css?v=20251117"/>
    <link rel="icon" href="uploads/alumni_logo_header.png">
</head>
<body class="theme-quartz-ivory">

<!-- Header -->
<header class="site-header">
    <div class="container header-inner">
        <a class="brand" href="#top" aria-label="Startseite">
            <img src="uploads/alumni_logo_header.png" alt="UZH Alumni Informatik - Alumni.ch">
        </a>

        <a class="brand-uzh" href="https://www.uzh.ch" target="_blank" rel="noopener" aria-label="UZH Website">
            <img src="uploads/uzh-logo.svg" alt="Universität Zürich">
        </a>

        <nav class="nav">
            <a href="#about">Über uns</a>
            <a href="#events">Events</a>
            <a href="#sponsors">Sponsoren</a>
            <a href="#contact" class="btn btn-primary">Kontakt</a>
        </nav>
        <button class="nav-toggle" aria-label="Menü öffnen" aria-expanded="false">☰</button>
    </div>
</header>

<!-- Hero -->
<section id="top" class="section hero">
    <div class="container hero-inner">
        <h1>Alumni Informatik UZH</h1>
        <p class="lead">
            Netzwerk, Austausch und Karriereimpulse für Absolvent:innen der Informatik an der Universität Zürich.
        </p>
        <div class="hero-cta">
            <a href="https://uzhalumni.ch/page/mitgliedschaft" class="btn btn-primary" target="_blank" rel="noopener">Mitglied
                werden</a>
            <a href="#events" class="btn btn-ghost">Nächste Events</a>
        </div>
    </div>
    <div class="hero-bg" aria-hidden="true"></div>
</section>

<!-- About -->
<section id="about" class="section section-alt">
    <div class="container grid-2">
        <div>
            <ul class="about-stats">
                <li><strong>400+</strong> Mitglieder</li>
                <li><strong>1997</strong> gegründet</li>
                <li><strong>6–8</strong> Events pro Jahr</li>
            </ul>
            <h2>Über uns</h2>
            <p>
                Seit 1997 verbindet der UZH Alumni Informatik (UZH.AI) Ehemalige, Studierende und das
                <a href="https://www.ifi.uzh.ch" target="_blank" rel="noopener">Institut für Informatik</a>.
                Wir fördern Vernetzung, Mentoring und lebenslanges Lernen durch Events, Inhalte und Partnerschaften.
            </p>
            <p>
                Sind Sie interessiert, mit dem UZH.AI eine Partnerschaft oder eine Sponsoringzusage zu tätigen? Dann
                senden Sie uns eine <a href="#contact">E-Mail</a>.
            </p>
            <ul class="checklist">
                <li>Networking-Anlässe & Fachvorträge</li>
                <li>Brücke zwischen Alumni, IfI und Wirtschaft</li>
                <li>Partnerschaften & Sponsoring-Möglichkeiten</li>
            </ul>
        </div>
    </div>
</section>

<!-- Events (Carousel) -->
<section id="events" class="section section-events">
    <div class="container">
        <div class="section-head centered">
            <h2>Events</h2>
        </div>

        <!-- Search bar centered above carousel -->
        <div class="event-search">
            <input id="q" class="input input-lg" placeholder="Suche nach Titel, Ort, Tags …" aria-label="Event-Suche"/>
        </div>

        <div class="carousel">
            <button class="car-btn prev" aria-label="Zurück">‹</button>
            <div class="track" id="eventsTrack" aria-live="polite"></div>
            <button class="car-btn next" aria-label="Weiter">›</button>
        </div>

        <p id="eventsCount" class="muted"></p>

        <div class="section-cta">
            <a class="btn btn-ghost" href="api/ics.php" target="_blank" rel="noopener">Als Kalender abonnieren
                (.ics)</a>
            <a class="btn" href="admin/" target="_blank" rel="noopener">Admin</a>
        </div>
    </div>
</section>

<!-- Sponsors -->
<section id="sponsors" class="section section-alt">
    <div class="container">
        <h2>Sponsoren</h2>
        <p class="muted">Danke an unsere Unterstützer:innen.</p>
        <div class="logo-grid">
            <a href="https://www.createq.ch/" target="_blank" rel="noopener" title="Createq – Website öffnen">
                <img src="uploads/logo_createq.png" alt="Sponsor Createq"/>
            </a>
            <a href="https://www.migrosbank.ch/" target="_blank" rel="noopener" title="Migros Bank – Website öffnen">
                <img src="uploads/logo_migrosbank.png" alt="Sponsor Migros Bank"/>
            </a>
            <a href="https://www.zkb.ch/" target="_blank" rel="noopener" title="Zürcher Kantonalbank – Website öffnen">
                <img src="uploads/logo_zkb.png" alt="Sponsor Zürcher Kantonalbank"/>
            </a>
            <a href="https://www.ausbildung-weiterbildung.ch/" target="_blank" rel="noopener"
               title="Ausbildung-weiterbildung.ch – Website öffnen">
                <img src="uploads/logo_ausbildung-weiterbildung.jpg" alt="Sponsor Ausbildung-weiterbildung.ch"/>
            </a>
        </div>
    </div>
</section>

<!-- Partners -->
<section id="partner" class="section section-alt">
    <div class="container">
        <h2>Partner</h2>
        <p class="muted">Danke an unsere Partner.</p>
        <div class="logo-grid">
            <a href="https://www.goldwynpartners.ch/" target="_blank" rel="noopener"
               title="Goldwyn Partners Group AG – Website öffnen" class="logo-card">
                <img src="uploads/goldwyn-partners-group-ag.png" alt="Partner Goldwyn Partners Group AG"/>
            </a>

            <a href="https://www.proacademics.ch/" target="_blank" rel="noopener"
               title="Pro Academics AG – Website öffnen" class="logo-card">
                <img src="uploads/pro-academics.png" alt="Partner Pro Academics AG"/>
            </a>
        </div>
    </div>
</section>

<!-- Contact -->
<section id="contact" class="section">
    <div class="container grid-2">
        <div class="contact-copy">
            <h2>Kontakt</h2>
            <p class="contact-lead">
                Fragen zu Mitgliedschaft, Partnerschaft oder Events?
            </p>
            <p class="muted">
                Nutzen Sie das Formular – wir melden uns in der Regel innerhalb von 2–3 Werktagen.
            </p>

            <ul class="contact-meta">
                <li>
                    <span class="label">Adresse</span>
                    <span>UZH Alumni Informatik, 8000 Zürich</span>
                </li>
            </ul>
        </div>

        <form id="contactForm" class="card" method="post" action="api/contact.php" novalidate>
            <div class="grid-2">
                <label>Vorname<span class="req" aria-label="Pflichtfeld">*</span>
                    <input name="first" required aria-required="true">
                </label>
                <label>Nachname<span class="req" aria-label="Pflichtfeld">*</span>
                    <input name="last" required aria-required="true">
                </label>
            </div>
            <label>E-Mail<span class="req" aria-label="Pflichtfeld">*</span>
                <input type="email" name="email" required aria-required="true">
            </label>
            <label>Betreff<span class="req" aria-label="Pflichtfeld">*</span>
                <input name="subject" required aria-required="true">
            </label>
            <label>Nachricht<span class="req" aria-label="Pflichtfeld">*</span>
                <textarea name="message" rows="6" required aria-required="true"></textarea>
            </label>
            <input type="hidden" name="csrf" id="csrf">
            <input type="text" name="company" class="hp" autocomplete="off" tabindex="-1" aria-hidden="true">
            <div class="form-actions">
                <button class="btn btn-primary" type="submit">Senden</button>
                <p id="contactStatus" class="muted" role="status" aria-live="polite"></p>
            </div>
        </form>
    </div>
</section>


<!-- Footer -->
<footer class="footer">
    <div class="container footer-inner">
        <p>© <span id="y"></span> UZH Alumni Informatik · Zürich</p>
        <nav class="footer-nav">
            <a href="#top">Top</a>
            <a href="#" onclick="alert('Impressum folgt');return false;">Impressum</a>
            <a href="#" onclick="alert('Nutzungsbedingungen folgen');return false;">Nutzungs­bedingungen</a>
        </nav>
    </div>
</footer>

<!-- Scripts -->
<script>
    // Mobile nav
    const toggle = document.querySelector('.nav-toggle');
    const nav = document.querySelector('.nav');
    toggle.addEventListener('click', () => {
        const open = nav.classList.toggle('open');
        toggle.setAttribute('aria-expanded', String(open));
        toggle.setAttribute('aria-label', open ? 'Menü schließen' : 'Menü öffnen');
    });

    // Close mobile nav when clicking links
    nav.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            nav.classList.remove('open');
            toggle.setAttribute('aria-expanded', 'false');
            toggle.setAttribute('aria-label', 'Menü öffnen');
        });
    });

    // Footer year
    document.getElementById('y').textContent = new Date().getFullYear();

    // CSRF token for contact
    const token = (Math.random().toString(36).slice(2) + Math.random().toString(36).slice(2));
    document.getElementById('csrf').value = token;
    sessionStorage.setItem('csrf', token);

    // Contact AJAX with improved error handling
    const form = document.getElementById('contactForm');
    const status = document.getElementById('contactStatus');
    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        // Tell CSS that the user has tried to submit
        form.classList.add('was-validated');

        if (!form.checkValidity()) {
            form.reportValidity();
            return;
        }

        status.textContent = 'Senden …';
        status.className = 'muted';

        const data = new FormData(form);
        try {
            const res = await fetch(form.action, {method: 'POST', body: data});
            if (!res.ok) throw new Error('Server error');

            const json = await res.json();
            if (json.ok) {
                status.textContent = 'Danke! Wir melden uns.';
                status.className = 'success-text';
                form.reset();
                form.classList.remove('was-validated'); // clear borders after success

                const t = Math.random().toString(36).slice(2) + Math.random().toString(36).slice(2);
                document.getElementById('csrf').value = t;
                sessionStorage.setItem('csrf', t);
            } else {
                status.textContent = json.error || 'Senden fehlgeschlagen.';
                status.className = 'error-text';
            }
        } catch (err) {
            status.textContent = 'Netzwerkfehler. Bitte versuchen Sie es erneut.';
            status.className = 'error-text';
            console.error('Contact form error:', err);
        }
    });

    // ===== Events Carousel: upcoming only =====
    (async function renderEvents() {
        const track = document.getElementById('eventsTrack');
        const count = document.getElementById('eventsCount');
        const q = document.getElementById('q');
        const prevBtn = document.querySelector('.car-btn.prev');
        const nextBtn = document.querySelector('.car-btn.next');

        let all = [];
        try {
            const res = await fetch('events.json', {cache: 'no-cache'});
            if (!res.ok) throw new Error('Failed to load');
            all = await res.json();
        } catch (e) {
            track.innerHTML = `<p class="muted">Events konnten nicht geladen werden. Bitte versuchen Sie es später erneut.</p>`;
            console.error('Event loading error:', e);
            return;
        }
        all = Array.isArray(all) ? all : [];

        const fmt = new Intl.DateTimeFormat('de-CH', {
            weekday: 'short', year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit'
        });

        function escapeHtml(s) {
            const div = document.createElement('div');
            div.textContent = String(s);
            return div.innerHTML;
        }

        function itemsUpcoming() {
            const now = new Date();
            let items = all.filter(e => new Date(e.start) >= now);
            const text = q.value.trim().toLowerCase();
            if (text) {
                items = items.filter(e =>
                    (e.title ?? '').toLowerCase().includes(text) ||
                    (e.location ?? '').toLowerCase().includes(text) ||
                    (e.description ?? '').toLowerCase().includes(text) ||
                    (e.tags ?? []).join(' ').toLowerCase().includes(text)
                );
            }
            items.sort((a, b) => a.start.localeCompare(b.start));
            return items;
        }

        function render() {
            const items = itemsUpcoming();
            if (!items.length) {
                track.innerHTML = `<p class="muted" style="padding:12px">Keine bevorstehenden Events gefunden.</p>`;
                count.textContent = '';
                prevBtn.disabled = true;
                nextBtn.disabled = true;
                return;
            }

            track.innerHTML = items.map(e => {
                const start = new Date(e.start);
                const end = e.end ? new Date(e.end) : null;
                const when = end ? `${fmt.format(start)} – ${fmt.format(end)}` : fmt.format(start);
                const img = e.image
                    ? `<img loading="lazy" src="${escapeHtml(e.image)}" alt="">`
                    : `<img loading="lazy" src="uploads/uzh-placeholder.jpg" alt="Universität Zürich">`;
                const url = e.url ? `<a class="btn btn-ghost" href="${escapeHtml(e.url)}" target="_blank" rel="noopener">Infos / Anmeldung</a>` : '';
                const tags = (e.tags ?? []).slice(0, 3).map(t => `<span class="tag">${escapeHtml(t)}</span>`).join('');
                return `
          <article class="card event-card">
            <figure class="card-media">
              ${img}
              <span class="card-label">Event</span>
            </figure>
            <div class="event-body">
              <h3>${escapeHtml(e.title ?? '')}</h3>
              <div class="event-meta">${when}${e.location ? ' · ' + escapeHtml(e.location) : ''}</div>
              ${e.description ? `<p>${escapeHtml(e.description)}</p>` : ''}
              <div class="event-actions">
                ${url}
                ${tags ? `<div class="tags">${tags}</div>` : ''}
              </div>
            </div>
          </article>
        `;
            }).join('');

            count.textContent = `${items.length} Event${items.length === 1 ? '' : 's'} angezeigt`;
            requestAnimationFrame(updateArrowState);
        }

        function cardStep() {
            const card = track.querySelector('.event-card');
            if (!card) return 300;
            const style = getComputedStyle(track);
            const gap = parseInt(style.columnGap || style.gap || '18', 10);
            return card.getBoundingClientRect().width + gap;
        }

        function scrollNext() {
            track.scrollBy({left: cardStep(), behavior: 'smooth'});
        }

        function scrollPrev() {
            track.scrollBy({left: -cardStep(), behavior: 'smooth'});
        }

        function updateArrowState() {
            const max = track.scrollWidth - track.clientWidth - 1;
            const atStart = track.scrollLeft <= 0;
            const atEnd = track.scrollLeft >= max;
            prevBtn.disabled = atStart;
            nextBtn.disabled = atEnd;
        }

        // Debounce search
        let debounceTimer;
        q.addEventListener('input', () => {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(render, 300);
        });

        prevBtn.addEventListener('click', scrollPrev);
        nextBtn.addEventListener('click', scrollNext);
        track.addEventListener('scroll', () => {
            window.requestAnimationFrame(updateArrowState);
        });
        window.addEventListener('resize', updateArrowState);

        render();
    })();
</script>
</body>
</html>